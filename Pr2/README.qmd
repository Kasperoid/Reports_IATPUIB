---
format:
  md:
    output-file: "README.md"
editor: "visual"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Практика № 2

Основы обработки данных с помощью R и Dplyr

## Цель работы

1.  Развить практические навыки использования языка программирования R для обработки данных

2.  Закрепить знания базовых типов данных языка R

3.  Развить практические навыки использования функций обработки данныхх пакета dplyr - функции select(), filter(), mutate(), arrange(), group_by()

## Исходные данные

1.  Ноутбук

2.  OC Windows

3.  Rstudio

4.  Пакет dplyr

5.  Встроенный набор данных starwars

6.  Github

## План выполнения работы

1.  Установить пакет dplyr

2.  Выполнение поставленных задач

## Содержание практической работы

### Шаг 1

**На данном шаге происходит установка пакета dplyr**

Для начала выполнения задания необходимо установить пакет dplyr, для этого используется команда `install.packages('dplyr')`

```{r}
library(dplyr)
```

### Шаг 2

**На данном шаге происходит выполнение заданий**

```{r}
dplyr::starwars
```

#### Задание 1

Вопрос: Сколько строк в датафрейме?

```{r}
starwars |> nrow()
```

#### Задание 2

Вопрос: Сколько столбцов в датафрейме?

```{r}
starwars |> ncol()
```

#### Задание 3

Вопрос: Как просмотреть примерный вид датафрейма?

```{r}
starwars |> glimpse()
```

#### Задание 4

Вопрос: Сколько уникальных рас персонажей (species) представлено в данных?

```{r}
length(unique(starwars$species))
```

#### Задание 5

Вопрос: Найти самого высокого персонажа

```{r}
starwars |> arrange(desc(height)) |> head(1) |> select(name)
```

#### Задание 6

Вопрос: Найти всех персонажей ниже 170

```{r}
starwars |> filter(height < 170) |> select(name)
```

#### Задание 7

Вопрос: Подсчитать ИМТ (индекс массы тела) для всех персонажей. ИМТ подсчитать по данной формуле.

```{r}
starwars |> filter(!is.na(mass), !is.na(height)) |> mutate("ИМТ" = mass/(height * height)) |> select(name, "ИМТ")
```

#### Задани 8

Вопрос: Найти 10 самых вытянутых персонажей. "Вытянутость" оценить по отношению массы к росту персонажей

```{r}
starwars |> filter(!is.na(mass), !is.na(height)) |> mutate('Вытянутость' = mass/height) |> arrange(desc(Вытянутость)) |> head(10) |> select(name, 'Вытянутость')
```

#### Задание 9

Вопрос: Найти средний возраст персонажей каждой рассы вселенной звездных войн

```{r}
starwars |> filter(!is.na(birth_year)) |> group_by(species) |> summarise('Сред' = mean(birth_year))
```

#### Задание 10

Вопрос: Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.

```{r}
starwars |> filter(!is.na(eye_color)) |> group_by(eye_color) |> summarise('CountEye'= n()) |> arrange(desc(CountEye)) |> head(1) |> select(eye_color)
```

#### Задание 11

Вопрос: Подсчитать среднюю длину имени в каждой расе вселенной Звездных Войн

```{r}
starwars |> mutate('lenName' = nchar(name)) |> group_by(species) |> summarise('meanNameLen' = mean(lenName))
```

## Оценка результатов

1.  Были успешно выполнены поставленные задачи

2.  Изучена библиотека dplyr и соответствующие функции для решения задач (filter, group_by...)

## Вывод

Получен навык практической работы с функциями обработки данных: select(), filter(), mutate(), arrange(), group_by()
